function moveArrEle(e,t,n){n=e[n],t=e.splice(t,1)[0];e.splice(e.indexOf(n)+1,0,t)}function removeTask(e){tasks.splice(tasks.indexOf(e),1),completed.includes(e)&&completed.splice(completed.indexOf(e),1),noncompleted.includes(e)&&noncompleted.splice(noncompleted.indexOf(e),1),e.remove(),countChecked()}document.getElementById("switch-theme").onclick=function(){[this.src,this.dataset.altSrc]=[this.dataset.altSrc,this.src],document.body.classList.toggle("light")};const tasks=[],completed=[],noncompleted=[];function createTask(e,t){const o=document.createElement("div");o.role="Task",o.draggable=!0,tasks.push(o),(e?(o.className="task checked",completed):(o.className="task",noncompleted)).push(o);var e=document.createElement("span"),n=(e.className="check-btn",e.role="Check the task Button",e.onclick=function(){this.parentElement.classList.toggle("checked"),this.parentElement.classList.contains("checked")?(completed.push(o),noncompleted.splice(noncompleted.indexOf(o),1)):(noncompleted.push(o),completed.splice(completed.indexOf(o),1)),countChecked()},document.createElement("p")),t=(n.className="task-content",n.textContent=t,document.createElement("img"));t.src="images/icon-cross.svg",t.alt="X",t.className="remove-btn",t.title="Remove Task",t.role="Remove task",t.onclick=()=>{removeTask(o)},o.append(e,n,t),document.getElementById("tasks").appendChild(o),countChecked(),o.addEventListener("drag",t=>{let n=null,e=null;var c,s,l;"all"==usedFilter?e=tasks:"active"==usedFilter?e=noncompleted:"completed"==usedFilter&&(e=completed),1<e.length&&(e.forEach(e=>{t.y>=e.offsetTop&&t.y<e.offsetTop+e.offsetHeight&&(n=e)}),c=e[0],t.y<c.offsetTop&&t.y&&(n="top"),s=e[e.length-1],t.y>s.offsetTop+s.offsetHeight&&(n="bottom"),l=e.indexOf(o),"top"==n?c!=o&&(o.remove(),c.insertAdjacentElement("beforeBegin",o),moveArrEle(e,l,-1)):"bottom"==n?s!=o&&(o.remove(),s.insertAdjacentElement("afterEnd",o),moveArrEle(e,l,e.length-1)):n!=o&&n!=e[e.indexOf(o)-1]&&null!=n&&(o.remove(),n.insertAdjacentElement("afterEnd",o),moveArrEle(e,l,e.indexOf(n))))})}const inputField=document.getElementById("input");function createTaskFromInputField(){createTask(!1,inputField.querySelector("input").value),inputField.querySelector("input").value=""}function countChecked(){document.getElementById("unchecked-count").innerText=noncompleted.length}inputField.querySelector(".check-btn").onclick=createTaskFromInputField,inputField.onkeydown=e=>{"Enter"==e.key&&createTaskFromInputField()},document.getElementById("clear").onclick=()=>{completed.forEach(e=>{tasks.splice(tasks.indexOf(e),1),e.remove()}),completed.length=0};let usedFilter="all";const filters=Array.from(document.getElementById("filters").children);filters.forEach(e=>{e.onclick=()=>{filters.forEach(e=>{e.classList.remove("checked"),document.getElementById("tasks").classList.remove(e.classList[0]+"-tasks")}),e.classList.add("checked"),document.getElementById("tasks").classList.add(e.classList[0]+"-tasks"),"all"==(usedFilter=e.classList[0])&&(tasks.length=0,tasks.splice(0,0,...noncompleted.concat(completed)),tasks.forEach(e=>{e.remove(),document.getElementById("tasks").append(e)}))}});